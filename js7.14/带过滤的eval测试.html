<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>带过滤的eval测试 </title>
	<script type="text/javascript" src="yclib.js"></script>
</head>
<body>
	<script type="text/javascript">
		var obj=yc.parseJson('{"name":"tom","age":-20}',function(k,v){
			if(k=='age'){
				v=v<0?1:v;
			}
			return v;
		});
		alert( obj.name+"t"+obj.age);
		var obj2=yc.parseJson('{"name":"smith","age":-50}', function(k,v){
			return (k=='age'&&v<0)?1:v;
		});
		alert(obj2.name+"t"+obj2.age);

		// //更复杂的情况出现：{"name":"tom","age":20,"address":"province":"湖南","postcode":"12345678"}};
		// var obj3=yc.parseJson( {"name":"tom","age":20,"address":"province":"湖南","postcode":"12345678"});
		// 	function(k,v){
		// 		var result;
		// 		if(k=="postcode"){
		// 			if(v.length!=6){
		// 				result="未知邮编";
		// 			}else{
		// 				result=v;
		// 			}
		// 		}
		// 		return result;
		// 	}   //更复杂的情况代码实现有误
		
	</script>
</body>
</html>